<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ClickPlus</title>
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <script type="module" src="index.js"></script>
</head>
<body>
  <button class="help-icon" onclick="openHelpModal()" aria-label="Help">?</button>
  <div class="main-layout" id="mainLayout">
    <section class="panel session-panel">
      <div class="session-panel__header">
        <h3>Control Center</h3>
        <div class="session-panel__actions">
          <div class="quiz-toggle session-panel__random">
            <span id="randomNamesToggleText" class="quiz-toggle__text">Random Names</span>
            <label class="toggle-switch">
              <input type="checkbox" id="randomNamesToggle" aria-labelledby="randomNamesToggleText">
              <span class="toggle-switch__slider"></span>
            </label>
          </div>
          <button class="session-panel__create" onclick="newSession()">Create Session</button>
        </div>
      </div>
      <ol id="statusInstructions" class="status-message status-list">
        <li>Create session. If Random Names is enabled, each student will be automatically assigned a random name.</li>
        <li>Ask student to scan QR code to join the session.</li>
        <li>Start session once all students have joined.</li>
      </ol>
      <p id="statusMessage" class="status-message hidden"></p>
      <div class="session-panel__qr">
        <a id="qrUrl" class="qr-url" href="" onclick="openStudentWindow(event)"></a>
        <canvas id="qrcode"></canvas>
      </div>
    </section>

    <section class="panel students-panel">
      <div class="students-panel__header">
        <h3>Joined Students <span class="students-panel__count">(<span id="studentCount">0</span>)</span></h3>
        <button id="startButton" onclick="startSession()" disabled>Start Session</button>
      </div>
      <div id="students" class="students-list"></div>
    </section>
  </div>

  <section class="panel live-panel hidden" id="livePanel">
    <div class="live-panel__content">
      <div class="live-panel__stats" id="standardStats">
        <div class="live-panel__count" id="clickedCount">0</div>
        <div class="live-panel__detail">
          <span id="clickedDetail">0 of 0 students</span>
          <span id="clickedPercentWrap">(<span id="clickedPercent">0%</span>)</span>
        </div>
      </div>

      <div class="live-panel__type hidden" id="typeStats">
        <div class="live-panel__type-summary">
          <span id="typeResponseCount">0 responses</span>
        </div>
        <div class="word-cloud" id="typeWordCloud"></div>
      </div>

      <div class="live-panel__choice hidden" id="choiceStats">
        <div class="choice-meter">
          <div class="choice-meter__item choice-meter__item--yes">
            <span class="choice-meter__value" id="choiceYesCount">0</span>
            <div class="choice-meter__detail">
              <span class="choice-meter__label">Yes</span>
              <span class="choice-meter__percent" id="choiceYesPercent">0%</span>
            </div>
          </div>
          <div class="choice-meter__item choice-meter__item--no">
            <span class="choice-meter__value" id="choiceNoCount">0</span>
            <div class="choice-meter__detail">
              <span class="choice-meter__label">No</span>
              <span class="choice-meter__percent" id="choiceNoPercent">0%</span>
            </div>
          </div>
        </div>
      </div>

      <div class="live-panel__controls">
        <div class="live-panel__modes">
          <div class="segment-control" role="group" aria-label="Modes" id="modeControl">
            <button type="button" class="segment-option active" data-mode="standard">Standard</button>
            <button type="button" class="segment-option" data-mode="quick">Quick</button>
            <button type="button" class="segment-option" data-mode="type">Type</button>
            <button type="button" class="segment-option" data-mode="choice">Choice</button>
          </div>
        </div>
        <div class="live-panel__actions">
          <button class="live-panel__round" id="roundButton" onclick="toggleRound()">Start</button>
          <button class="live-panel__finish" onclick="finishSession()">Exit</button>
        </div>
      </div>
    </div>
  </section>

  <section class="panel chart-panel hidden" id="chartPanel">
    <h2>Session Summary</h2>
    <canvas id="chartCanvas"></canvas>
    <button class="chart-panel__ok" onclick="showParticipationTable()">OK</button>
  </section>

  <section class="panel participation-panel hidden" id="participationPanel">
    <h2>Student Participation</h2>
    <div class="participation-table-wrapper">
      <table class="participation-table" id="participationTable">
        <thead>
          <tr>
            <th>Student Name</th>
            <th>Participation %</th>
          </tr>
        </thead>
        <tbody id="participationTableBody">
        </tbody>
      </table>
    </div>
    <button class="participation-panel__ok" onclick="closeParticipationTable()">OK</button>
  </section>

  <footer class="footer">
    Â© 2025 Developed by Innovation Analytics Laboratory at Tunghai University <a href="https://forms.cloud.microsoft/r/sgxBfXLnmd">Feeback</a>
  </footer>

  <div class="modal hidden" id="helpModal">
    <div class="modal__overlay" onclick="closeHelpModal()"></div>
    <div class="modal__content">
      <button class="modal__close" onclick="closeHelpModal()" aria-label="Close">&times;</button>
      <div class="modal__body">
        <h2>How to Start</h2>
        <p><strong>Teacher selects a game mode, then clicks the Start button.</strong></p>

        <hr class="modal__divider">

        <h3>Standard Mode</h3>
        <p><strong>Measure task completion.</strong> Students click the button when they finish their assigned task. The screen displays how many students have completed. Useful for tracking progress during individual work.</p>
        <p><strong>Game ends when:</strong> All students respond, teacher clicks Stop, or time runs out.</p>

        <h3>Quick Mode</h3>
        <p><strong>Speed competition game.</strong> Students race to click the button first. The name of the fastest student appears on the screen. Great for quick-fire quiz questions or reaction challenges.</p>
        <p><strong>Game ends when:</strong> First student clicks the button.</p>

        <h3>Type Mode</h3>
        <p><strong>Collect text responses.</strong> Students type their answers into a text field. All responses are collected and displayed together as a word cloud on the screen. Perfect for brainstorming or gathering opinions.</p>
        <p><strong>Game ends when:</strong> All students respond, teacher clicks Stop, or time runs out.</p>

        <h3>Choice Mode</h3>
        <p><strong>Yes or No voting.</strong> Students select either Yes or No to respond. Vote results are displayed on screen showing the distribution of answers. Ideal for polls, decisions, or quick assessments.</p>
        <p><strong>Game ends when:</strong> All students respond, teacher clicks Stop, or time runs out.</p>

        <hr class="modal__divider">

        <h2>How to Exit</h2>
        <p><strong>Press the Exit button to close the session completely and view session statistics.</strong></p>
      </div>
    </div>
  </div>
</body>
</html>









